import{_ as e,c as i,o as t,ag as a}from"./chunks/framework.S-Qvb3wi.js";const g=JSON.parse('{"title":"Ingestion Service API","description":"","frontmatter":{},"headers":[],"relativePath":"api/ingestion.md","filePath":"api/ingestion.md"}'),n={name:"api/ingestion.md"};function r(o,s,l,h,p,d){return t(),i("div",null,s[0]||(s[0]=[a(`<h1 id="ingestion-service-api" tabindex="-1">Ingestion Service API <a class="header-anchor" href="#ingestion-service-api" aria-label="Permalink to &quot;Ingestion Service API&quot;">​</a></h1><p>The Ingestion Service manages ingestion sources, which are configurations for connecting to email providers and importing emails.</p><h2 id="endpoints" tabindex="-1">Endpoints <a class="header-anchor" href="#endpoints" aria-label="Permalink to &quot;Endpoints&quot;">​</a></h2><p>All endpoints in this service require authentication.</p><h3 id="post-api-v1-ingestion-sources" tabindex="-1">POST /api/v1/ingestion-sources <a class="header-anchor" href="#post-api-v1-ingestion-sources" aria-label="Permalink to &quot;POST /api/v1/ingestion-sources&quot;">​</a></h3><p>Creates a new ingestion source.</p><p><strong>Access:</strong> Authenticated</p><h4 id="request-body" tabindex="-1">Request Body <a class="header-anchor" href="#request-body" aria-label="Permalink to &quot;Request Body&quot;">​</a></h4><p>The request body should be a <code>CreateIngestionSourceDto</code> object.</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CreateIngestionSourceDto</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">	name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">	provider</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;google_workspace&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;microsoft_365&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;generic_imap&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;pst_import&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;eml_import&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;mbox_import&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">	providerConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IngestionCredentials</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="example-creating-an-mbox-import-source-with-file-upload" tabindex="-1">Example: Creating an Mbox Import Source with File Upload <a class="header-anchor" href="#example-creating-an-mbox-import-source-with-file-upload" aria-label="Permalink to &quot;Example: Creating an Mbox Import Source with File Upload&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;My Mbox Import&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	&quot;provider&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mbox_import&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	&quot;providerConfig&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">		&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mbox_import&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">		&quot;uploadedFileName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;emails.mbox&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">		&quot;uploadedFilePath&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;open-archiver/tmp/uuid-emails.mbox&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="example-creating-an-mbox-import-source-with-local-file-path" tabindex="-1">Example: Creating an Mbox Import Source with Local File Path <a class="header-anchor" href="#example-creating-an-mbox-import-source-with-local-file-path" aria-label="Permalink to &quot;Example: Creating an Mbox Import Source with Local File Path&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;My Mbox Import&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	&quot;provider&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mbox_import&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	&quot;providerConfig&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">		&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mbox_import&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">		&quot;localFilePath&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/path/to/emails.mbox&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>Note:</strong> When using <code>localFilePath</code>, the file will not be deleted after import. When using <code>uploadedFilePath</code> (via the upload API), the file will be automatically deleted after import. The same applies to <code>pst_import</code> and <code>eml_import</code> providers.</p><p><strong>Important regarding <code>localFilePath</code>:</strong> When running OpenArchiver in a Docker container (which is the standard deployment), <code>localFilePath</code> refers to the path <strong>inside the Docker container</strong>, not on the host machine. To use a local file:</p><ol><li><strong>Recommended:</strong> Place your file inside the directory defined by <code>STORAGE_LOCAL_ROOT_PATH</code> (e.g., inside a <code>temp</code> folder). Since this directory is already mounted as a volume, the file will be accessible at the same path inside the container.</li><li><strong>Alternative:</strong> Mount a specific directory containing your files as a volume in <code>docker-compose.yml</code>. For example, add <code>- /path/to/my/files:/imports</code> to the <code>volumes</code> section and use <code>/imports/myfile.pst</code> as the <code>localFilePath</code>.</li></ol><h4 id="responses" tabindex="-1">Responses <a class="header-anchor" href="#responses" aria-label="Permalink to &quot;Responses&quot;">​</a></h4><ul><li><strong>201 Created:</strong> The newly created ingestion source.</li><li><strong>500 Internal Server Error:</strong> An unexpected error occurred.</li></ul><h3 id="get-api-v1-ingestion-sources" tabindex="-1">GET /api/v1/ingestion-sources <a class="header-anchor" href="#get-api-v1-ingestion-sources" aria-label="Permalink to &quot;GET /api/v1/ingestion-sources&quot;">​</a></h3><p>Retrieves all ingestion sources.</p><p><strong>Access:</strong> Authenticated</p><h4 id="responses-1" tabindex="-1">Responses <a class="header-anchor" href="#responses-1" aria-label="Permalink to &quot;Responses&quot;">​</a></h4><ul><li><strong>200 OK:</strong> An array of ingestion source objects.</li><li><strong>500 Internal Server Error:</strong> An unexpected error occurred.</li></ul><h3 id="get-api-v1-ingestion-sources-id" tabindex="-1">GET /api/v1/ingestion-sources/:id <a class="header-anchor" href="#get-api-v1-ingestion-sources-id" aria-label="Permalink to &quot;GET /api/v1/ingestion-sources/:id&quot;">​</a></h3><p>Retrieves a single ingestion source by its ID.</p><p><strong>Access:</strong> Authenticated</p><h4 id="url-parameters" tabindex="-1">URL Parameters <a class="header-anchor" href="#url-parameters" aria-label="Permalink to &quot;URL Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th style="text-align:left;">Parameter</th><th style="text-align:left;">Type</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>id</code></td><td style="text-align:left;">string</td><td style="text-align:left;">The ID of the ingestion source.</td></tr></tbody></table><h4 id="responses-2" tabindex="-1">Responses <a class="header-anchor" href="#responses-2" aria-label="Permalink to &quot;Responses&quot;">​</a></h4><ul><li><strong>200 OK:</strong> The ingestion source object.</li><li><strong>404 Not Found:</strong> Ingestion source not found.</li><li><strong>500 Internal Server Error:</strong> An unexpected error occurred.</li></ul><h3 id="put-api-v1-ingestion-sources-id" tabindex="-1">PUT /api/v1/ingestion-sources/:id <a class="header-anchor" href="#put-api-v1-ingestion-sources-id" aria-label="Permalink to &quot;PUT /api/v1/ingestion-sources/:id&quot;">​</a></h3><p>Updates an existing ingestion source.</p><p><strong>Access:</strong> Authenticated</p><h4 id="url-parameters-1" tabindex="-1">URL Parameters <a class="header-anchor" href="#url-parameters-1" aria-label="Permalink to &quot;URL Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th style="text-align:left;">Parameter</th><th style="text-align:left;">Type</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>id</code></td><td style="text-align:left;">string</td><td style="text-align:left;">The ID of the ingestion source.</td></tr></tbody></table><h4 id="request-body-1" tabindex="-1">Request Body <a class="header-anchor" href="#request-body-1" aria-label="Permalink to &quot;Request Body&quot;">​</a></h4><p>The request body should be an <code>UpdateIngestionSourceDto</code> object.</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UpdateIngestionSourceDto</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">	name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">	provider</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;google&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;microsoft&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;generic_imap&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">	providerConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IngestionCredentials</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">	status</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;pending_auth&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;auth_success&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;importing&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;active&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;paused&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;error&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="responses-3" tabindex="-1">Responses <a class="header-anchor" href="#responses-3" aria-label="Permalink to &quot;Responses&quot;">​</a></h4><ul><li><strong>200 OK:</strong> The updated ingestion source object.</li><li><strong>404 Not Found:</strong> Ingestion source not found.</li><li><strong>500 Internal Server Error:</strong> An unexpected error occurred.</li></ul><h3 id="delete-api-v1-ingestion-sources-id" tabindex="-1">DELETE /api/v1/ingestion-sources/:id <a class="header-anchor" href="#delete-api-v1-ingestion-sources-id" aria-label="Permalink to &quot;DELETE /api/v1/ingestion-sources/:id&quot;">​</a></h3><p>Deletes an ingestion source and all associated data.</p><p><strong>Access:</strong> Authenticated</p><h4 id="url-parameters-2" tabindex="-1">URL Parameters <a class="header-anchor" href="#url-parameters-2" aria-label="Permalink to &quot;URL Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th style="text-align:left;">Parameter</th><th style="text-align:left;">Type</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>id</code></td><td style="text-align:left;">string</td><td style="text-align:left;">The ID of the ingestion source.</td></tr></tbody></table><h4 id="responses-4" tabindex="-1">Responses <a class="header-anchor" href="#responses-4" aria-label="Permalink to &quot;Responses&quot;">​</a></h4><ul><li><strong>204 No Content:</strong> The ingestion source was deleted successfully.</li><li><strong>404 Not Found:</strong> Ingestion source not found.</li><li><strong>500 Internal Server Error:</strong> An unexpected error occurred.</li></ul><h3 id="post-api-v1-ingestion-sources-id-import" tabindex="-1">POST /api/v1/ingestion-sources/:id/import <a class="header-anchor" href="#post-api-v1-ingestion-sources-id-import" aria-label="Permalink to &quot;POST /api/v1/ingestion-sources/:id/import&quot;">​</a></h3><p>Triggers the initial import process for an ingestion source.</p><p><strong>Access:</strong> Authenticated</p><h4 id="url-parameters-3" tabindex="-1">URL Parameters <a class="header-anchor" href="#url-parameters-3" aria-label="Permalink to &quot;URL Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th style="text-align:left;">Parameter</th><th style="text-align:left;">Type</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>id</code></td><td style="text-align:left;">string</td><td style="text-align:left;">The ID of the ingestion source.</td></tr></tbody></table><h4 id="responses-5" tabindex="-1">Responses <a class="header-anchor" href="#responses-5" aria-label="Permalink to &quot;Responses&quot;">​</a></h4><ul><li><strong>202 Accepted:</strong> The initial import was triggered successfully.</li><li><strong>404 Not Found:</strong> Ingestion source not found.</li><li><strong>500 Internal Server Error:</strong> An unexpected error occurred.</li></ul><h3 id="post-api-v1-ingestion-sources-id-pause" tabindex="-1">POST /api/v1/ingestion-sources/:id/pause <a class="header-anchor" href="#post-api-v1-ingestion-sources-id-pause" aria-label="Permalink to &quot;POST /api/v1/ingestion-sources/:id/pause&quot;">​</a></h3><p>Pauses an active ingestion source.</p><p><strong>Access:</strong> Authenticated</p><h4 id="url-parameters-4" tabindex="-1">URL Parameters <a class="header-anchor" href="#url-parameters-4" aria-label="Permalink to &quot;URL Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th style="text-align:left;">Parameter</th><th style="text-align:left;">Type</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>id</code></td><td style="text-align:left;">string</td><td style="text-align:left;">The ID of the ingestion source.</td></tr></tbody></table><h4 id="responses-6" tabindex="-1">Responses <a class="header-anchor" href="#responses-6" aria-label="Permalink to &quot;Responses&quot;">​</a></h4><ul><li><strong>200 OK:</strong> The updated ingestion source object with a <code>paused</code> status.</li><li><strong>404 Not Found:</strong> Ingestion source not found.</li><li><strong>500 Internal Server Error:</strong> An unexpected error occurred.</li></ul><h3 id="post-api-v1-ingestion-sources-id-sync" tabindex="-1">POST /api/v1/ingestion-sources/:id/sync <a class="header-anchor" href="#post-api-v1-ingestion-sources-id-sync" aria-label="Permalink to &quot;POST /api/v1/ingestion-sources/:id/sync&quot;">​</a></h3><p>Triggers a forced synchronization for an ingestion source.</p><p><strong>Access:</strong> Authenticated</p><h4 id="url-parameters-5" tabindex="-1">URL Parameters <a class="header-anchor" href="#url-parameters-5" aria-label="Permalink to &quot;URL Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th style="text-align:left;">Parameter</th><th style="text-align:left;">Type</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>id</code></td><td style="text-align:left;">string</td><td style="text-align:left;">The ID of the ingestion source.</td></tr></tbody></table><h4 id="responses-7" tabindex="-1">Responses <a class="header-anchor" href="#responses-7" aria-label="Permalink to &quot;Responses&quot;">​</a></h4><ul><li><strong>202 Accepted:</strong> The force sync was triggered successfully.</li><li><strong>404 Not Found:</strong> Ingestion source not found.</li><li><strong>500 Internal Server Error:</strong> An unexpected error occurred.</li></ul>`,69)]))}const k=e(n,[["render",r]]);export{g as __pageData,k as default};
